/**
 * Responsive prop mixin
 * Generates CSS custom properties and media queries for responsive props
 * 
 * @param $class-name - Full class name with zen- prefix (e.g., 'zen-box')
 * @param $prop-name - Prop name (e.g., 'padding', 'gap')
 * @param $css-property - CSS property name (e.g., 'padding', 'gap')
 */
@use '../variables/breakpoints' as bp;
@use 'sass:map';
@use 'sass:string';

@mixin responsive-prop($class-name, $prop-name, $css-property) {
  // Strip 'zen-' prefix to get component name
  $component-name: if(
    string.index($class-name, 'zen-') == 1,
    string.slice($class-name, 5),
    $class-name
  );

  // Base rule - only applies with data attribute
  #{$class-name}[data-has-responsive-#{$prop-name}='true'] {
    #{$css-property}: var(--#{$component-name}-#{$prop-name}-base);
  }

  // Media query for xs breakpoint
  @media (min-width: map.get(bp.$breakpoints, 'xs')) {
    /* --breakpoint-xs: 480px */
    #{$class-name}[data-has-responsive-#{$prop-name}='true'] {
      #{$css-property}: var(
        --#{$component-name}-#{$prop-name}-xs,
        var(--#{$component-name}-#{$prop-name}-base)
      );
    }
  }

  // Media query for sm breakpoint
  @media (min-width: map.get(bp.$breakpoints, 'sm')) {
    /* --breakpoint-sm: 640px */
    #{$class-name}[data-has-responsive-#{$prop-name}='true'] {
      #{$css-property}: var(
        --#{$component-name}-#{$prop-name}-sm,
        var(
          --#{$component-name}-#{$prop-name}-xs,
          var(--#{$component-name}-#{$prop-name}-base)
        )
      );
    }
  }

  // Media query for md breakpoint
  @media (min-width: map.get(bp.$breakpoints, 'md')) {
    /* --breakpoint-md: 1024px */
    #{$class-name}[data-has-responsive-#{$prop-name}='true'] {
      #{$css-property}: var(
        --#{$component-name}-#{$prop-name}-md,
        var(
          --#{$component-name}-#{$prop-name}-sm,
          var(
            --#{$component-name}-#{$prop-name}-xs,
            var(--#{$component-name}-#{$prop-name}-base)
          )
        )
      );
    }
  }

  // Media query for lg breakpoint
  @media (min-width: map.get(bp.$breakpoints, 'lg')) {
    /* --breakpoint-lg: 1280px */
    #{$class-name}[data-has-responsive-#{$prop-name}='true'] {
      #{$css-property}: var(
        --#{$component-name}-#{$prop-name}-lg,
        var(
          --#{$component-name}-#{$prop-name}-md,
          var(
            --#{$component-name}-#{$prop-name}-sm,
            var(
              --#{$component-name}-#{$prop-name}-xs,
              var(--#{$component-name}-#{$prop-name}-base)
            )
          )
        )
      );
    }
  }
}

